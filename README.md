this draft was generated by GPT4
---

# Expense Tracker API

This is a backend application for tracking expenses, allowing users to sign up, log in, and manage their personal expense records. 

> **Follow the [Expense Tracker API roadmap](https://roadmap.sh/projects/expense-tracker-api) to expand and improve this project.**

## Table of Contents
1. [Features](#features)
2. [Technologies Used](#technologies-used)
3. [Setup and Installation](#setup-and-installation)
4. [Environment Variables](#environment-variables)
5. [Usage](#usage)
6. [Testing](#testing)
7. [API Endpoints](#api-endpoints)

## Features
- User Authentication (Sign-up and Login with JWT)
- Secure storage of passwords with hashing
- Expense tracking with CRUD operations
- Expense filtering by date range and category

## Technologies Used
- **.NET Core** (ASP.NET API)
- **SQLite** database
- **JWT** for authentication
- **Entity Framework Core** for database ORM

## Setup and Installation
1. **Clone the repository**:
   ```bash
   git clone https://github.com/yourusername/expense-tracker-api.git
   cd expense-tracker-api
   ```

2. **Install dependencies**:
   ```bash
   dotnet restore
   ```

3. **Set up the database**:
   Run migrations to create the necessary tables.
   ```bash
   dotnet ef database update
   ```

4. **Start the application**:
   ```bash
   dotnet run
   ```

The API should now be running on `http://localhost:5000`.

## Environment Variables
Create a `.env` file in the root of your project to store environment variables such as:
- `TokenKey`: A secure key for JWT signing. You can generate a 64-character key with:
  ```bash
  openssl rand -base64 64
  ```

## Usage
1. **Authentication**
   - Register a new user and log in to get an authentication token.
   - Use the token in the `Authorization` header for all other requests.

2. **Testing with cURL**
   - Use the provided cURL commands in [Using cURL in Postman](#) or follow the instructions below.

3. **Testing with Postman**
   - Import the collection from the `Using cURL in Postman` chat or enter the API endpoints manually.

## Testing

To test the API with `curl`, follow these sample commands:

### Register
```bash
curl --location 'https://localhost:44355/user/Auth/register' \
--header 'Content-Type: application/json' \
--data '{
  "username": "John",
  "password": "Letmein2"
}'
```

### Login
```bash
curl --location 'https://localhost:44355/user/Auth/login' \
--header 'Authorization: Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJuYW1laWQiOiJraGFsZWQiLCJuYmYiOjE3MzEyMDE1OTAsImV4cCI6MTczMTgwNjM5MCwiaWF0IjoxNzMxMjAxNTkwfQ.ovChTD47q8urYepLjh94fE-Y8I-iOTf7OKGQBQZyBHGwcj0gwyyr70--ls7NLgtfqDqB3wePMOmUs0C6BTvxYA' \
--header 'Content-Type: application/json' \
--data '{
  "username": "John",
  "password": "Letmein2"
}'
```

#### [ for logged user (must pass jwt of user) ]

### Create an Expense
```bash
curl --location 'https://localhost:44355/finance/expenses/addexpense' \
--header 'Authorization: Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJuYW1laWQiOiJqb2huIiwiVXNlcklkIjoiMiIsIm5iZiI6MTczMTI2NjIwMSwiZXhwIjoxNzMxODcxMDAxLCJpYXQiOjE3MzEyNjYyMDF9.23--_7yoJqsmV5tFETWAs1IVOPwfk0GqC0YGJax40llEZxNsSk0eFYUs7PkpmXi1o6g__pz-FpZ-eS0kzN8Xxg' \
--header 'Content-Type: application/json' \
--data '{
    "amount": 50.75,
    "description": "Grocery shopping",
    "category": 1,
    "date": "2024-11-10T12:00:00Z"
}'
```

### Get Expenses 
```bash
curl --location 'https://localhost:44355/finance/expenses/GetExpenses' \
--header 'Authorization: Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJuYW1laWQiOiJqb2huIiwiVXNlcklkIjoiMiIsIm5iZiI6MTczMTI2ODc3NSwiZXhwIjoxNzMxODczNTc1LCJpYXQiOjE3MzEyNjg3NzV9.UsXi4blM--qu99WR1GP_vWAR_1cir6HIoIqRGjVVnLvcDoeJuxDStLzO6ur_s_7c1wtoUDbmxNE90a0D6VzkUA' \
--data ''
```

### Get Expense {id}
```bash
curl --location 'https://localhost:44355/finance/expenses/GetExpense/1' \
--header 'Authorization: Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJuYW1laWQiOiJqb2huIiwiVXNlcklkIjoiMiIsIm5iZiI6MTczMTI2ODc3NSwiZXhwIjoxNzMxODczNTc1LCJpYXQiOjE3MzEyNjg3NzV9.UsXi4blM--qu99WR1GP_vWAR_1cir6HIoIqRGjVVnLvcDoeJuxDStLzO6ur_s_7c1wtoUDbmxNE90a0D6VzkUA' \
--data ''
```

### Update Expense {id}
```bash
curl --location --request PUT 'https://localhost:44355/finance/expenses/updateExpense/2' \
--header 'Authorization: Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJuYW1laWQiOiJqb2huIiwiVXNlcklkIjoiMiIsIm5iZiI6MTczMTI2ODc3NSwiZXhwIjoxNzMxODczNTc1LCJpYXQiOjE3MzEyNjg3NzV9.UsXi4blM--qu99WR1GP_vWAR_1cir6HIoIqRGjVVnLvcDoeJuxDStLzO6ur_s_7c1wtoUDbmxNE90a0D6VzkUA' \
--header 'Content-Type: application/json' \
--data '{
  "id": 2,
  "amount": 75.50,
  "description": "Updated Leisure shopping",
  "category": 1,
  "date": "2024-11-11T12:00:00Z"
}
'
```

### Delete Expense {id}
```bash
curl --location --request DELETE 'https://localhost:44355/finance/expenses/deleteExpense/1' \
--header 'Authorization: Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJuYW1laWQiOiJqb2huIiwiVXNlcklkIjoiMiIsIm5iZiI6MTczMTI2ODc3NSwiZXhwIjoxNzMxODczNTc1LCJpYXQiOjE3MzEyNjg3NzV9.UsXi4blM--qu99WR1GP_vWAR_1cir6HIoIqRGjVVnLvcDoeJuxDStLzO6ur_s_7c1wtoUDbmxNE90a0D6VzkUA' \
--data ''
```

## API Endpoints

| Method | Endpoint                                 | Description                      |
|--------|------------------------------------------|----------------------------------|
| POST   | `/user/auth/register`                    | Register a new user              |
| POST   | `/user/auth/login`                       | Login a user                     |
| POST   | `/finance/expenses/addExpense`           | Add a new expense                |
| GET    | `/finance/expenses/getExpenses`          | List all expenses                |
| GET    | `/finance/expenses/getExpense/{id}`      | Get an expense by ID             |
| PUT    | `/finance/expenses/updateExpense/{id}`   | Update an expense                |
| DELETE | `/finance/expenses/deleteExpense/{id}`   | Delete an expense                |

--- 

Feel free to add more details, such as error handling or future development directions.
